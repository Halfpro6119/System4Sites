# System4Sites - Business Lead Enrichment & Email Campaign Generator

A Next.js application that receives business data via webhook, enriches it with web scraping and AI analysis, and generates personalized email campaigns using Lindy AI.

## Features

- **Webhook Endpoint**: POST `/api/webhook` to process business data
- **Web Crawling**: Automatically scrapes business websites for content
- **Lead Enrichment**: Finds owner information, reviews, and ratings
- **Smart Filtering**: Only processes businesses with 4+ star rating and 3+ positive reviews
- **Lindy AI-Powered Analysis**: Generates comprehensive website audits using Lindy AI agents
- **Email Campaign Generation**: Creates personalized 6-email sequences with demo links

## Setup

1. Clone the repository:
```bash
git clone https://github.com/Halfpro6119/System4Sites.git
cd System4Sites
```

2. Install dependencies:
```bash
bun install
```

3. Create `.env.local` file:
```bash
# Lindy AI Configuration (Primary)
LINDY_API_KEY=your_lindy_api_key_here
LINDY_AGENT_ID=your_lindy_agent_id_here

# OpenAI API Key (Fallback)
OPENAI_API_KEY=your_openai_api_key_here
```

4. Run the development server:
```bash
bun run dev
```

5. Open [http://localhost:3000](http://localhost:3000)

## API Usage

### POST /api/webhook

Send business data in this format:

```json
{
  "idx": 0,
  "RowNumber": 1758873406,
  "title": "PINQ Staffing LLC",
  "map_link": "https://www.google.com/maps/...",
  "cover_image": "https://...",
  "rating": "5.0",
  "category": "Employment agency",
  "address": "1019 E 54th St N, Tulsa, OK 74126",
  "webpage": "https://example.com",
  "phone_number": "(918) 764-8757",
  "working_hours": "",
  "Used": false
}
```

### Response

Returns comprehensive JSON with:
- Business audit data (generated by Lindy AI)
- Owner information
- Website analysis
- 6-part email campaign (generated by Lindy AI)
- Reviews and ratings

### Fields Generated by Lindy AI

The following fields are automatically generated using Lindy AI agents:
- `business_summary` - Brief description and current website issues
- `pain_points` - Main website issues affecting conversions
- `site_issues` - Specific technical/UX problems
- `icebreaker` - Specific personal detail about the business
- All email campaign content (6 emails with subjects and bodies)

## Tech Stack

- **Next.js 15** - React framework
- **TypeScript** - Type safety
- **Tailwind CSS** - Styling
- **shadcn/ui** - UI components
- **Lindy AI** - AI-powered analysis and content generation
- **OpenAI GPT-4** - Fallback AI analysis
- **Cheerio** - Web scraping
- **Axios** - HTTP requests

## How It Works

1. **Receive Webhook** - Business data is posted to `/api/webhook`
2. **Crawl Website** - Scrapes business website for content
3. **Enrich Data** - Searches for owner info, reviews, ratings
4. **Filter** - Only processes businesses with 4+ stars and 3+ reviews
5. **Lindy AI Analysis** - Generates comprehensive audit and insights
6. **Email Campaign** - Creates personalized 6-email sequence
7. **Return JSON** - Complete data package ready for use

## Deployment

Deploy to Vercel:

```bash
vercel
```

Make sure to add your environment variables to Vercel:
- `LINDY_API_KEY`
- `LINDY_AGENT_ID`
- `OPENAI_API_KEY` (optional fallback)

## License

MIT
